<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Super Quiz</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/libs/swiper/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="assets/libs/fancybox/fancybox.css"/>
</head>
<body>
    <header class="main-header">
        <div class="logo">
            Super Quiz
        </div>
        <nav class="navbar">
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link">Главная</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Квиз</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Отзывы</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Не главная</a>
                    <ul class="submenu">
                        <li><a href="#">Подпункт</a></li>
                        <li><a href="#">Ещё подпункт</a></li>
                        <li><a href="#">И ещё один подпункт</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div class="contacts">
            <button data-fancybox href="#modal-form" id="contact-btn">Связаться с нами</button>
        </div>
    </header>
    <main>
        <!-- Контейнер для вопросов -->
        <div class="quiz-wrapper">
            <!-- Боковая панель с вопросами -->
            <div class="quiz-sidebar">
                <div id="qq-1" class="quiz-question active" onclick="showQuestion(1)">
                    <b>Какие виды тестов вам нравятся?</b>
                    <p>Кто я из вселенной Марвел, На словарный запас</p>
                </div>
                <div id="qq-2" class="quiz-question" onclick="showQuestion(2)">
                    <b>Вы любите проходить тесты?</b>
                    <p>Да, я прохожу все тесты</p>
                </div>
                <div id="qq-3" class="quiz-question" onclick="showQuestion(3)">
                    <b>Спасибо за ответы! Заполните форму ниже</b>
                </div>
                <!-- Дополнительные вопросы -->
            </div>
            <!-- Окно для отображения текущего вопроса -->
            <div class="quiz-content">
                <div id="quiz-1" class="quiz active">
                    <h1>Какие виды тестов вам нравятся?</h1>
                    <p>Многие из нас хоть раз попадались на эту удочку — хочешь пройти всего один тест из интернета, и вдруг понимаешь, что пролетело полдня.</p>
                    <!-- Ответы -->
                    <form class="answer-container" action="">
                        <fieldset>
                            <div class="custom-checkbox">
                                <input type="checkbox" name="1" id="a-1-1">
                                <label for="a-1-1">На темперамент</label>
                                <span class="checkmark"></span>
                            </div>
                            <div class="custom-checkbox">
                                <input type="checkbox" name="2" id="a-1-2">
                                <label for="a-1-2">Кто я из вселенной Марвел</label>
                                <span class="checkmark"></span>
                            </div>
                            <div class="custom-checkbox">
                                <input type="checkbox" name="3" id="a-1-3">
                                <label for="a-1-3">Увидел это</label>
                                <span class="checkmark"></span>
                            </div>
                            <div class="custom-checkbox">
                                <input type="checkbox" name="4" id="a-1-4">
                                <label for="a-1-4">Мое тотемное животное</label>
                                <span class="checkmark"></span>
                            </div>
                            <div class="custom-checkbox">
                                <input type="checkbox" name="4" id="a-1-5">
                                <label for="a-1-5">На IQ</label>
                                <span class="checkmark"></span>
                            </div>
                            <div class="custom-checkbox">
                                <input type="checkbox" name="4" id="a-1-6">
                                <label for="a-1-6">На словарный запас</label>
                                <span class="checkmark"></span>
                            </div>
                            <div class="custom-checkbox">
                                <input type="checkbox" name="4" id="a-1-7">
                                <label for="a-1-7">На логическое мышление</label>
                                <span class="checkmark"></span>
                            </div>
                            <div class="custom-checkbox">
                                <input type="checkbox" name="4" id="a-1-8">
                                <label for="a-1-8">На уровень интеллекта</label>
                                <span class="checkmark"></span>
                            </div>
                            <!-- Дополнительные чекбоксы -->
                        </fieldset>
                    </form>
                </div>
                <div id="quiz-2" class="quiz">
                    <h1>Вы любите проходить тесты?</h1>
                    <p>Нам важно узнать насолько часто Вы проходите тесты.</p>
                    <!-- Ответы -->
                    <form class="answer-container" action="">
                        <fieldset>
                            <div class="custom-radio">
                                <input type="radio" name="1" id="a-2-1">
                                <label for="a-2-1">Нет, я никогда не прохожу тесты</label>
                            </div>
                            <div class="custom-radio">
                                <input type="radio" name="1" id="a-2-2">
                                <label for="a-2-2">Да, я прохожу все тесты</label>
                            </div>
                            <div class="custom-radio">
                                <input type="radio" name="1" id="a-2-3">
                                <label for="a-2-3">Заставляю себя проходить тесты</label>
                            </div>
                            <div class="custom-radio">
                                <input type="radio" name="1" id="a-2-4">
                                <label for="a-2-4">Не люблю проходить тесты, но иногда приходится</label>
                            </div>
                            <!-- Дополнительные радио -->
                        </fieldset>
                    </form>
                </div>
                <div id="quiz-3" class="quiz">
                    <img src="assets/img/smile.webp" alt="">
                    <h1>Спасибо за ответы! Заполните форму ниже</h1>
                    <p>Ваше мнение важно для нас. Прикрепите фото с Вашей любимой картинкой и оставьте комментарий насколько понравился Вам тест.</p>
                    <!-- Ответы -->
                    <form class="answer-container" action="">
                        <fieldset>
                            <input class="custom-text" type="text" placeholder="Ваше мнение сюда">
                            <details class="custom-select">
                                <summary class="radios">
                                    <input type="radio" name="item" id="item1" title="Очень понравился" checked>
                                    <input type="radio" name="item" id="item2" title="Не понравился">
                                    <input type="radio" name="item" id="item3" title="Пройду еще раз">
                                    <input type="radio" name="item" id="item4" title="Посоветую пройти всем">
                                </summary>
                                <ul class="list">
                                    <li>
                                        <label for="item1">Очень понравился</label>
                                    </li>
                                    <li>
                                        <label for="item2">Не понравился</label>
                                    </li>
                                    <li>
                                        <label for="item3">Пройду еще раз</label>
                                    </li>
                                    <li>
                                        <label for="item4">Посоветую пройти всем</label>
                                    </li>
                                </ul>
                            </details>
                        </fieldset>
                    </form>
                </div>
                <!-- Дополнительные вопросы -->

                <div class="quiz-buttons">
                    <button id="back-button" class="quiz-back">Назад</button>
                    <button id="continue-button" class="quiz-next">Продолжить</button>
                </div>
            </div>
        </div>
        <!-- Контейнер для карточек -->
        <div class="swiper swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <div class="card">
                        <div class="card-holder">
                            <div class="union"></div>
                            <img src="assets/img/avatar2.webp" alt="Тимур Никитенко">
                            <h3>Тимур Никитенко</h3>
                            <p>Господа, глубокий уровень погружения в значительной степени обусловливает важность глубокомысленных рассуждений.</p>
                        </div>
                        <img class="card__background" src="assets/img/background2.webp" alt="background">
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="card">
                        <div class="card-holder">
                            <div class="union"></div>
                            <img src="assets/img/avatar3.webp" alt="Артур Усович">
                            <h3>Артур Усович</h3>
                            <p>Задача организации, в особенности же убеждённость некоторых оппонентов предопределяет высокую востребованность благоприятных перспектив.</p>
                        </div>
                        <img class="card__background" src="assets/img/background3.webp" alt="background">
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="card">
                        <div class="card-holder">
                            <div class="union"></div>
                            <img src="assets/img/avatar4.webp" alt="Егор Грей">
                            <h3>Егор Грей</h3>
                            <p>Разнообразный и богатый опыт говорит нам, что высокое качество позиционных исследований предопределяет высокую востребованность кластеризации усилий.</p>
                        </div>
                        <img class="card__background" src="assets/img/background4.webp" alt="background">
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="card">
                        <div class="card-holder">
                            <div class="union"></div>
                            <img src="assets/img/avatar3.webp" alt="Артур Усович">
                            <h3>Артур Усович</h3>
                            <p>Задача организации, в особенности же убеждённость некоторых оппонентов предопределяет высокую востребованность благоприятных перспектив.</p>
                        </div>
                        <img class="card__background" src="assets/img/background3.webp" alt="background">
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="card">
                        <div class="card-holder">
                            <div class="union"></div>
                            <img src="assets/img/avatar2.webp" alt="Тимур Никитенко">
                            <h3>Тимур Никитенко</h3>
                            <p>Мне очень понравился тест.</p>
                        </div>
                        <img class="card__background" src="assets/img/background2.webp" alt="background">
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="card">
                        <div class="card-holder">
                            <div class="union"></div>
                            <img src="assets/img/avatar1.webp" alt="Андрей Пархимович">
                            <h3>Андрей Пархимович</h3>
                            <p>В целом, конечно, постоянное информационно-пропагандистское обеспечение нашей деятельности влечет за собой процесс внедрения и модернизации направлений прогрессивного развития.</p>
                        </div>
                        <img class="card__background" src="assets/img/background1.webp" alt="background">
                    </div>
                </div>
            </div>
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
        </div>
        <!-- Связаться с нами -->
        <form method="post" action="" class="form" id="modal-form" style="display: none;">
            <div class="fancy-header">
                <h2>Заполните контактные
                    данные</h2>
                <p>Пройди квиз, и будешь счастлив. Этот квиз предназначен для тех людей, которые любят проходить тесты!</p>
            </div>
            <fieldset>
                <input type="text" name="name" class="custom-text" placeholder="Ваше имя"/>
                <input type="text" name="mail" class="custom-text" placeholder="Фамилия"/>
                <input required type="text" name="mail" class="custom-text" id="comment" placeholder="Ваш комментарий"/>
                <div class="file-box">
                    <div class="file__field">
                        <input type="file" name="file[]" id="file" multiple/>
                        <label class="file__btn" for="file">
                            <p>Приложить файлы</p>
                            <div class="file__names" id="file_names"></div>
                            <img src="assets/img/pick-file.svg" alt="">
                        </label>
                        <div class="file__btn-close" id="file_btn_close">✖</div>
                    </div>
                    <div class="warning">
                        <img src="assets/img/warning.svg" alt="">
                        <div class="hint">
                            Максимум 20 Мб<br>
                            В формате jpg, png
                        </div>
                    </div>
                </div>
                <p>Этот квиз предназначен для тех людей, которые любят проходить тесты!</p>
                <div class="custom-radio">
                    <input type="radio" name="2" id="f-1">
                    <label for="f-1">Не знаю</label>
                </div>
                <div class="custom-radio">
                    <input type="radio" name="2" id="f-2">
                    <label for="f-2">Увидел это</label>
                </div>
                <div class="custom-radio">
                    <input type="radio" name="2" id="f-3">
                    <label for="f-3">Вон то</label>
                </div>
                <div class="custom-radio">
                    <input type="radio" name="2" id="f-4">
                    <label for="f-4">Вон то</label>
                </div>
                <div class="custom-radio">
                    <input type="radio" name="2" id="f-5">
                    <label for="f-5">Увидел это</label>
                </div>
                <div class="custom-radio">
                    <input type="radio" name="2" id="f-6">
                    <label for="f-6">Не знаю</label>
                </div>
            </fieldset>
            <input type="submit" value="Продолжить" class="form__submit"/>
        </form>
    </main>
    <footer class="main-footer">

    </footer>
    <script src="assets/libs/swiper/swiper-bundle.min.js"></script>
    <script src="assets/libs/fancybox/fancybox.umd.js"></script>
    <script>
        var swiper = new Swiper(".swiper-container", {
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
            loop: true,
            centeredSlides: true,
            slidesPerView: 1.13,
            spaceBetween: 10,
            breakpoints: {
                440: {
                    slidesPerView: 1.3,
                    spaceBetween: 40
                },
                540: {
                    slidesPerView: 1.5,
                    spaceBetween: 40
                },
                640: {
                    slidesPerView: 2,
                    spaceBetween: 40
                },
                820: {
                    slidesPerView: 2.3,
                    spaceBetween: 40
                },
                1080: {
                    slidesPerView: 3.8,
                    spaceBetween: 40
                }
            }
        });
    </script>
    <script>
        document.getElementById('contact-btn').addEventListener('click', function() {
            Fancybox.show([{ src: "#modal-form", type: "inline" }]);
        });
    </script>
    <script>
        // Считываем нужные элементы
        const fileInput = document.querySelector("#file");
        const fileNamesContainer = document.querySelector("#file_names");
        const fileBtn = document.querySelector(".file__btn p");
        const fileBtnClose = document.querySelector("#file_btn_close");
        const inputComment = document.querySelector("#comment");
        const fileWarning = document.querySelector(".warning");
        const hint = document.querySelector(".hint");
        // Задаем максимальный размер файла 20 Мб
        const maxSize = 20 * 1024 * 1024;

        // При загрузке файлов - вызываем функцию проверки файлов
        fileInput.addEventListener("change", (e) => {
            // Очищаем предыдущие имена файлов
            fileNamesContainer.innerHTML = '';
            // Проверяем каждый выбранный файл
            Array.from(fileInput.files).forEach(checkFile);
        });

        // Обработчик кнопки удаления файлов
        fileBtnClose.addEventListener("click", (e) => {
            e.preventDefault();
            fileReset();
        });

        // Функция проверки файла
        function checkFile(file) {
            // Проверяем тип файла
            if (!["image/jpg", "image/png"].includes(file.type)) {
                fileWarning.style.display = "block";
                inputComment.classList.add('error');
                fileReset();
                return;
            }

            // Проверяем размер файла (<20 Мб)
            if (file.size > maxSize) {
                fileWarning.style.display = "block";
                inputComment.classList.add('error');
                fileReset();
                return;
            }
            showFileNames(file);
        }

        // Сброс выбранных файлов
        function fileReset() {
            fileInput.value = ""; // Удаляем выбранные файлы
            fileNamesContainer.innerHTML = ""; // Очищаем список имен файлов
            fileNamesContainer.style.display = "none";
            fileBtnClose.style.display = "none"; // Скрываем кнопку удаления
            fileBtn.style.display = "inline-block";
        }

        // Выводим имена файлов и кнопку удаления
        function showFileNames(file) {
            const fileNameElement = document.createElement("span");
            fileNameElement.textContent = file.name + " ";
            fileNamesContainer.appendChild(fileNameElement);
            fileNamesContainer.style.display = "inline-block";
            fileBtnClose.style.display = "inline-block"; // Показываем кнопку удаления
            fileBtn.style.display = "none";
            fileWarning.style.display = "none";
            inputComment.classList.remove('error');
        }

        // Функция для удаления файла из списка FileList
        function removeFileFromFileList(fileList, fileToRemove) {
            // FileList объекты являются read-only, поэтому мы должны создать новый список
            const newFileList = Array.from(fileList).filter(file => file !== fileToRemove);
            // Создаем новый объект DataTransfer
            const dataTransfer = new DataTransfer();
            newFileList.forEach(file => dataTransfer.items.add(file));
            // Возвращаем новый FileList
            return dataTransfer.files;
        }

        // Функция если поле пустое
        document.querySelector('.form__submit').addEventListener('click', function() {
            if (inputComment.value == "") {
                fileWarning.style.display = "block";
                hint.innerHTML = "Это обязательное поле";
                inputComment.classList.add('error');
            }
        });

        // Функция при отправке формы
        document.getElementById('modal-form').addEventListener('submit', function(e) {
            var formContent = document.getElementById('modal-form');
            formContent.innerHTML =
                `
                    <img src="assets/img/form-smile.webp" alt="" width="128" height="129">
                    <h2>Ваши данные
                    Отправлены</h2>
                    <p>Пройди квиз, и будешь счастлив. Этот квиз предназначен для тех людей, которые любят проходить тесты!</p>
                    <div data-fancybox-close="" class="form__close">Вернутся на сайт</div>
                    <button data-fancybox-close="" class="f-button is-close-btn" title="Close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"></path></svg></button>
                `;
            e.preventDefault();
        });
    </script>
    <script>
        // JavaScript для отображения ответа на выбранный вопрос
        function showQuestion(number) {
            // Убираем active со всех
            document.querySelectorAll('.quiz-question').forEach(function(qq) {
                qq.classList.remove('active');
            });
            document.querySelectorAll('.quiz').forEach(function(quiz) {
                quiz.classList.remove('active');
            });

            // Отображаем текщий вопрос
            let qq = document.getElementById('qq-' + number);
            qq.classList.add('active');
            let quiz = document.getElementById('quiz-' + number);
            quiz.classList.add('active');

            // Показываем/скрываем кнопку назад
            if (number == 1) {
                document.getElementById('back-button').style.display = 'none';
            } else {
                document.getElementById('back-button').style.display = 'block';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Обработчик для кнопок ответа
            document.addEventListener('click', clickAnswer, false);
            function clickAnswer(event) {
                // Если нажали на custom-checkbox
                if (event.target.closest('.custom-checkbox')) {
                    event.target.closest('.custom-checkbox').classList.toggle('active');
                    const input = event.target.closest('.custom-checkbox').querySelector('input[type="checkbox"]');
                    input.checked = !input.checked;
                }
                // Если нажали на custom-radio
                if (event.target.closest('.custom-radio')) {
                    document.querySelectorAll('.custom-radio').forEach(function(cr) {
                        cr.classList.remove('active');
                    });
                    event.target.closest('.custom-radio').classList.add('active');
                    const input = event.target.closest('.custom-radio').querySelector('input[type="radio"]');
                    input.checked = true;
                }
                // Если нажали на custom-checkbox label
                if (event.target.closest('.custom-checkbox label')) {
                    event.target.closest('label').parentElement.classList.toggle('active');
                    const input = event.target.closest('label').previousSibling;
                    input.checked = !input.checked;
                }
                // Если нажали на custom-select label
                if (event.target.closest('.custom-select .list li label')) {
                    document.querySelector('details.custom-select').removeAttribute('open');
                }
                // Если нажали на details.custom-select
                if (event.target.closest('details.custom-select')) {
                    let details = document.querySelector('details.custom-select');
                    if (details.hasAttribute('open')) {
                        details.removeAttribute('open');
                    } else {
                        details.setAttribute('open', '');
                    }
                }
            }
        });

        // Кнопка продолжить
        function nextQuestion() {
            // Получаем текущий активный вопрос
            let currentQuestion = document.querySelector('.quiz-question.active');
            // Получаем следующий вопрос
            let nextQuestion = currentQuestion.nextElementSibling;

            // Если следующий вопрос существует
            if (nextQuestion) {
                // Получаем id следуещего вопроса и извлекаем цифру вопроса
                let nextQuestionId = nextQuestion.id.replace(/\D/g, "");
                // Переключаемся с текущего вопроса
                currentQuestion.classList.remove('active');
                // На следующий вопрос
                nextQuestion.classList.add('active');
                // Показываем квиз
                showQuestion(nextQuestionId);
            } else {
                // Если это был последний вопрос, можно добавить логику для завершения викторины
                console.log('Викторина завершена');
            }
        }

        // Кнопка назад
        function prevQuestion() {
            // Получаем текущий активный вопрос
            let currentQuestion = document.querySelector('.quiz-question.active');
            // Получаем предыдущий вопрос
            let prevQuestion = currentQuestion.previousElementSibling;

            // Если предыдущий вопрос существует
            if (prevQuestion) {
                // Получаем id предыдущего вопроса и извлекаем цифру вопроса
                let prevQuestionId = prevQuestion.id.replace(/\D/g, "");
                // Переключаемся с текущего вопроса
                currentQuestion.classList.remove('active');
                // На предыдущий вопрос
                prevQuestion.classList.add('active');
                // Показываем квиз
                showQuestion(prevQuestionId);
            }
        }

        // Добавляем обработчик события на кнопку "Продолжить"
        document.getElementById('continue-button').onclick = nextQuestion;
        // Добавляем обработчик события на кнопку "Назад"
        document.getElementById('back-button').onclick = prevQuestion;


    </script>
</body>
</html>